<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For My Favorite Person ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,600;1,600&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { 
            --primary-rose: #ff4d6d;
            --deep-rose: #c9184a;
            --text-main: #590d22;
            --card-bg: rgba(255, 255, 255, 0.7);
        }
        
        /* --- FIX 4: REMOVE BLINKING CURSOR & TEXT SELECTION --- */
        * {
            -webkit-tap-highlight-color: transparent;
            caret-color: transparent; /* This hides the blinking line */
        }
        
        #typewriter, .card, h1, h2, p, .timer {
            outline: none;
            user-select: none; /* Prevents text from turning blue/highlighted */
        }

        button, .input {
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="%23ff4d6d" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>') 16 16, pointer !important;
        }

        body { 
            margin: 0; padding: 0;
            font-family: 'Poppins', sans-serif; 
            background: linear-gradient(45deg, #fff0f3, #ffccd5, #fff0f3, #ffb3c1);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: var(--text-main);
            display: flex; justify-content: center; align-items: center; 
            min-height: 100vh; overflow: hidden; 
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .particle {
            position: absolute; color: rgba(255, 77, 109, 0.2);
            font-size: 20px; user-select: none; pointer-events: none;
            animation: floatUp 10s linear infinite; z-index: -1;
        }
        @keyframes floatUp {
            0% { transform: translateY(110vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        .screen { 
            display: none; width: 95%; max-width: 500px; padding: 20px; 
            animation: fadeIn 1s ease forwards; box-sizing: border-box; 
        }

        .active { display: block; }
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(20px); filter: blur(10px); } 
            to { opacity: 1; transform: translateY(0); filter: blur(0); } 
        }

        .card { 
            background: var(--card-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.5); border-radius: 35px; 
            padding: 40px 25px; box-shadow: 0 25px 50px rgba(164, 19, 60, 0.1); text-align: center; 
        }

        h1, h2, h3 { font-family: 'Playfair Display', serif; font-weight: 600; margin-top: 0; }
        input { 
            width: 80%; padding: 18px; border-radius: 15px; border: 1px solid #ffb3c1; 
            outline: none; text-align: center; font-size: 1.2rem; margin-bottom: 15px;
            caret-color: var(--primary-rose); /* Allow cursor only here to type name */
        }
        button { background: var(--primary-rose); color: white; border: none; padding: 18px 45px; border-radius: 15px; font-weight: 600; transition: 0.4s; text-transform: uppercase; }
        button:hover { background: var(--deep-rose); transform: scale(1.05); }

        .fade-img { width: 220px; height: 220px; object-fit: cover; border-radius: 25px; border: 10px solid white; box-shadow: 0 15px 35px rgba(0,0,0,0.1); margin: 0 auto; display: block; }
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 35px; }
        .menu-box { background: white; padding: 25px; border-radius: 25px; transition: 0.4s; border: 1px solid rgba(255, 77, 109, 0.05); }
        .menu-box:hover { transform: translateY(-10px); border-color: var(--primary-rose); box-shadow: 0 20px 40px rgba(255, 77, 109, 0.15); }
        /* Modified for Vertical Display */
.gallery { 
    display: flex; 
    flex-direction: column; /* Stacks images vertically */
    gap: 25px; 
    padding: 20px 0; 
    align-items: center; /* Centers the images */
}

.gallery img { 
    width: 90%; /* Responsive width */
    max-width: 300px; /* Limits size on larger screens */
    height: auto; /* Maintains aspect ratio for vertical photos */
    border-radius: 20px; 
    border: 8px solid white; 
    box-shadow: 0 10px 25px rgba(0,0,0,0.1); 
}

        /* .gallery { display: flex; overflow-x: auto; gap: 20px; padding: 20px 0; scrollbar-width: none; }
        .gallery img { width: 220px; height: 220px; border-radius: 20px; object-fit: cover; border: 8px solid white; box-shadow: 0 10px 25px rgba(0,0,0,0.1); } */
        
        #typewriter { line-height: 1.8; font-size: 1.1rem; text-align: left; white-space: pre-wrap; color: #4a0e0e; }
        .timer { font-size: 1.1rem; color: var(--deep-rose); margin-top: 15px; font-weight: 600; line-height: 1.4; }
        .closing-line { margin-top: 30px; font-style: italic; color: var(--deep-rose); font-family: 'Playfair Display', serif; font-size: 1.2rem; }
    </style>
</head>
<body>

    <div id="signup" class="screen active">
        <div class="card">
            <h1>A Little Secret üîí</h1>
            <p>Please enter your name to begin</p>
            <input id="nameInput" type="text" placeholder="Your name...">
            <br>
            <button onclick="checkName()">Unlock My Heart ‚ù§Ô∏è</button>
            <p id="error" style="margin-top: 15px; color: var(--deep-rose); font-weight: bold;"></p>
        </div>
    </div>

    <div id="intro" class="screen">
        <div class="card">
            <img src="https://i.postimg.cc/QFqTxM3F/Fade-Two.jpg" class="fade-img">
            <h2 style="text-align: center; margin-top: 30px; font-style: italic;">Thinking of you...</h2>
        </div>
    </div>

    <div id="question" class="screen">
        <div class="card">
            <h1 id="greeting"></h1>
            <p style="font-size: 1.1rem; margin-bottom: 30px;">I have a very important question for you...</p>
            <h2 style="color: var(--deep-rose); font-size: 2rem;">Will you be my Valentine? ‚ù§Ô∏è</h2>
            <button onclick="accept()">YES, A THOUSAND TIMES üíñ</button>
        </div>
    </div>

    <div id="main" class="screen">
        <div class="card">
            <h2 style="margin-bottom: 0;">For My Everything</h2>
            <div class="timer" id="timer">Calculating every heartbeat...</div>
            
            <div class="menu-grid">
                <div class="menu-box" onclick="showSection('photos')">üì∏<br>Our Frames</div>
                <div class="menu-box" onclick="showSection('letter')">üíå<br>The Letter</div>
                <div class="menu-box" onclick="showSection('memories')">üï∞Ô∏è<br>Our Story</div>
                <div class="menu-box" onclick="showSection('favorite')">‚ú®<br>Favorites</div>
            </div>

            <div id="final-touch" style="display:none;" class="closing-line">
                "In a world full of temporary things, you are my forever." üåπ
            </div>
        </div>
    </div>

   <div id="photos" class="screen">
    <div class="card" style="max-height: 80vh; overflow-y: auto;"> <h3>Captured Moments</h3>
        <div class="gallery">
            <img src="https://i.postimg.cc/Wd7kb4vb/Frame-One.jpg">
            <img src="https://i.postimg.cc/tY7fz0Y3/Frame-Two.jpg">
            <img src="https://i.postimg.cc/VJFCLN8d/Frame-Three.jpg">
        </div>
        <button onclick="goBackToMain()">Return with Love</button>
    </div>
</div>

    <div id="letter" class="screen">
        <div class="card">
            <h3>From My Heart</h3>
            <p id="typewriter"></p>
            <button onclick="goBackToMain()">Return with Love</button>
        </div>
    </div>

    <div id="memories" class="screen">
        <div class="card">
            <h3>Our Journey üéûÔ∏è</h3>
            <div style="text-align: left; padding: 15px; border-left: 3px solid var(--primary-rose); background: rgba(255,255,255,0.3); border-radius: 0 15px 15px 0;">
                <p><strong>The 2 AM Promise:</strong><br> Late night calls turned just friends into everything at 2 AM on April 2nd.<br> Your eyes and your innocence touched my heart so deeply that I became yours completely. That night I saw my future wife in you. Happy Valentine‚Äôs Day my Lakshmi Ji ‚ú®</p>
                <p><strong>The Day I Knew:</strong><br> The day we stayed together, the world disappeared, and I knew my heart had finally found home in you. ‚ú®</p>
            </div>
            <button onclick="goBackToMain()">Return with Love</button>
        </div>
    </div>

    <div id="favorite" class="screen">
        <div class="card">
            <h3>Why You? ‚ú®</h3>
            <ul style="text-align: left; font-size: 1.1rem; list-style-type: '‚ù§Ô∏è '; line-height: 1.8;">
                <li>The way you listen with your whole heart.</li>
                <li>Your infectious, beautiful laugh.</li>
                <li>How you make even the smallest moments feel special.</li>
            </ul>
            <button onclick="goBackToMain()">Return with Love</button>
        </div>
    </div>

    <audio id="bgMusic" loop>
        <source src="https://files.catbox.moe/raj9en.mp3" type="audio/mpeg">
    </audio>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        const herName = "Nandini"; 
        const anniversaryDate = "2025-04-02"; 
        const letterText = "My dearest Nandini,\n\nI was listening to this song and I couldn't help but think of you. \n\nLike JVKE says, 'I'm so in love with her...' and every time I hear that, it's your face that flashes in my mind. \n\nYou aren't just my favorite person; you are my peace, my home, and my greatest adventure.\n\nThank you for being the 'Her' in my story. I love you more than words (or code) can ever express. ‚ù§Ô∏è";

        function createHearts() {
            const heartIcons = ['‚ù§Ô∏è', 'üå∏', '‚ú®', 'üíñ'];
            setInterval(() => {
                const heart = document.createElement('div');
                heart.classList.add('particle');
                heart.innerHTML = heartIcons[Math.floor(Math.random() * heartIcons.length)];
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = (Math.random() * 5 + 5) + 's';
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 10000);
            }, 700);
        }
        createHearts();

        function checkName() {
            const val = document.getElementById('nameInput').value.trim().toLowerCase();
            if(val === herName.toLowerCase() || val === "kuhuu") {
                document.getElementById('bgMusic').play();
                showSection('intro');
                setTimeout(() => showSection('question'), 3500);
            } else {
                document.getElementById('error').innerText = "Access Denied. I'm only in love with HER. If you aren't Kuhuu, you're in the wrong place. ‚ù§Ô∏è";
            }
        }

        function accept() {
            // FIX 1: Confetti triggers immediately
            confetti({ particleCount: 200, spread: 100, origin: { y: 0.6 }, colors: ['#ff4d6d', '#ffffff', '#c9184a'] });
            document.getElementById('greeting').innerText = `Hey ${herName} ‚ú®`;
            showSection('main');
            startTimer();
        }

        function showSection(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            window.scrollTo(0,0);
            if(id === 'letter') startTypewriter();
        }

        let sectionsExplored = 0;
        function goBackToMain() {
            sectionsExplored++;
            if(sectionsExplored >= 2) {
                document.getElementById('final-touch').style.display = 'block';
            }
            showSection('main');
        }

        let typewriterDone = false;
        function startTypewriter() {
            if (typewriterDone) return;
            let i = 0;
            const target = document.getElementById('typewriter');
            target.innerHTML = "";
            
            function type() {
                if (i < letterText.length) {
                    target.innerHTML += letterText.charAt(i);
                    i++;
                    setTimeout(type, 45); 
                } else {
                    // FIX 3: Burst of hearts when typewriter ends
                    typewriterDone = true;
                    const end = Date.now() + (2 * 1000);
                    const colors = ['#ff4d6d', '#ffccd5'];

                    (function frame() {
                      confetti({ particleCount: 3, angle: 60, spread: 55, origin: { x: 0 }, colors: colors });
                      confetti({ particleCount: 3, angle: 120, spread: 55, origin: { x: 1 }, colors: colors });
                      if (Date.now() < end) { requestAnimationFrame(frame); }
                    }());
                }
            }
            type();
        }

        function startTimer() {
            const start = new Date(anniversaryDate);
            setInterval(() => {
                const now = new Date();
                const diff = now - start;
                
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
                const minutes = Math.floor((diff / 1000 / 60) % 60);
                const seconds = Math.floor((diff / 1000) % 60);

                // FIX 2: Calculate Hours and Minutes
                document.getElementById('timer').innerHTML = 
                    `${days} Days, ${hours} Hours, ${minutes} Minutes,${seconds}<br>of Loving You`;
            }, 1000);
        }
    </script>
</body>
</html>
